<h1>Listing apps</h1>

<br />
<%= link_to 'New App', new_app_path %>


<table>
  <tr>
    <th>Name</th>
    <th>State</th>
    <th>Path</th>
    <th>Info</th>
    <th colspan="3">?</th>
  </tr>

  <% @apps.each do |app| %>
      <tr>
        <td><%= app.name %></td>
        <td><%= app.state %></td>
        <td><%= app.path %></td>
        <td>
          <ul>
            <li><b>Landscape:</b> <%= app.landscape.try(:name) %></li>
            <li><b>Branch:</b> <%= app.branch.try(:name) %></li>
              <%#= link_to app.external_script.try(:script), {:action => 'run_command', :id => app.id}, :remote => true, :html => {'data-type' => 'js'}  %>
          </ul>
        </td>
        <td class="action"><%= link_to 'Show', app %></td>
        <td class="action"><%= link_to 'Edit', edit_app_path(app) %></td>
        <td class="action"><%= link_to 'Destroy', app, method: :delete, data: {confirm: 'Are you sure?'} %></td>
      </tr>
  <% end %>
</table>

<div id="script-result"></div>
